<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Molly Online Clone - Fixed</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { background-color: #f0f4f8; font-family: 'Helvetica Neue', Arial, sans-serif; }
        .game-screen { background-color: #000; aspect-ratio: 1 / 1; position: relative; display: flex; align-items: center; justify-content: center; }
        .btn-green { background-color: #00a859; color: white; }
        .btn-orange { background-color: #ff9900; color: white; }
        /* 映像を画面いっぱいに広げる */
        .camera-stream { width: 100%; height: 100%; object-fit: contain; background-color: #000; }
        /* 読み込み失敗時のメッセージ用 */
        .error-msg { color: white; font-size: 12px; text-align: center; padding: 20px; position: absolute; }
    </style>
</head>
<body class="max-w-md mx-auto shadow-lg min-h-screen flex flex-col">

    <header class="btn-green p-3 flex justify-between items-center text-white font-bold">
        <div class="flex items-center gap-1">
            <span class="text-xl">Molly.Online</span>
        </div>
        <div class="flex gap-4 text-sm">
            <span><i class="fas fa-users"></i> 0</span>
            <span><i class="fas fa-coins"></i> 1</span>
        </div>
    </header>

    <main class="flex-grow flex flex-col">
        
        <div class="game-screen w-full relative overflow-hidden" id="video-container">
            <img id="camera-frame" 
                 src="https://192.168.11.28:8080" 
                 class="camera-stream" 
                 onerror="handleError(this)"
                 onload="handleLoad(this)">
            
            <div id="loading-text" class="error-msg">映像を読み込み中...<br>(表示されない場合はURLを直接開いて許可してください)</div>

            <div class="absolute top-4 right-4 bg-green-900/80 text-white text-[10px] p-2 border border-yellow-400 leading-tight pointer-events-none">
                こちらのブースは<br>動作・通信確認用です...
            </div>
        </div>

        <div class="bg-white p-3 flex justify-between items-center border-b">
            <div class="flex items-center gap-2 font-bold text-sm">
                <span>1Play</span>
                <span class="bg-green-600 text-white text-[10px] px-2 py-0.5 rounded-full">MP</span>
                <span class="text-lg">0MP</span>
            </div>
            <div class="text-gray-400 text-xs flex items-center gap-2">
                <i class="fas fa-ticket-alt"></i> --枚
                <span class="bg-gray-200 px-2 py-1 rounded">チケット</span>
            </div>
        </div>

        <div class="flex flex-col items-center py-8 gap-6">
            <button class="btn-green w-64 py-4 rounded-full text-2xl font-black shadow-lg active:scale-95 transition-transform">
                ゲーム予約
            </button>
            
            <div class="flex w-full px-4 justify-between items-center">
                <a href="#" class="text-green-600 text-sm font-bold">＞ 遊び方を見る</a>
                <div class="flex gap-2">
                    <button class="bg-white p-2 rounded-full border shadow-sm"><i class="fas fa-music text-green-500"></i></button>
                    <button id="btn-front" onclick="switchCamera('front')" class="btn-green px-4 py-2 rounded-lg flex items-center gap-2 font-bold shadow-md">
                        <i class="fas fa-camera"></i> まえ
                    </button>
                    <button id="btn-side" onclick="switchCamera('side')" class="bg-gray-300 px-4 py-2 rounded-lg text-white font-bold">
                        よこ
                    </button>
                </div>
            </div>
        </div>
    </main>

    <footer class="bg-gray-800 text-white p-2 flex justify-between items-center sticky bottom-0">
        <button class="bg-gray-500 px-3 py-1 rounded text-xs">戻る</button>
        <div class="flex gap-3 items-center">
            <span class="text-xs">保有</span>
            <span class="bg-green-600 px-2 py-0.5 rounded-full text-[10px]">MP</span>
            <span class="font-bold">37</span>
        </div>
        <button class="btn-orange px-4 py-1 rounded font-bold text-sm ml-2">MP購入</button>
    </footer>

    <script>
        const cameraImg = document.getElementById('camera-frame');
        const loadingText = document.getElementById('loading-text');
        
        const cameras = {
            front: "https://192.168.11.28:8080",
            side: "https://192.168.11.9:8080"
        };

        function switchCamera(type) {
            loadingText.style.display = "block";
            cameraImg.src = cameras[type];

            // ボタンの見た目切り替え
            const frontBtn = document.getElementById('btn-front');
            const sideBtn = document.getElementById('btn-side');

            if (type === 'front') {
                frontBtn.className = "btn-green px-4 py-2 rounded-lg flex items-center gap-2 font-bold shadow-md";
                sideBtn.className = "bg-gray-300 px-4 py-2 rounded-lg text-white font-bold";
            } else {
                sideBtn.className = "btn-green px-4 py-2 rounded-lg flex items-center gap-2 font-bold shadow-md";
                frontBtn.className = "bg-gray-300 px-4 py-2 rounded-lg text-white font-bold";
            }
        }

        function handleLoad(el) {
            loadingText.style.display = "none";
        }

        function handleError(el) {
            loadingText.innerHTML = `<span class="text-red-400 font-bold">映像を読み込めません</span><br>
                1. <a href="${el.src}" target="_blank" class="underline text-blue-400">ここをクリック</a>して許可を出してください<br>
                2. その後、この画面を再読み込みしてください`;
        }
    </script>
</body>
</html>
